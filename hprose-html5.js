// Hprose for HTML5 v2.0.3
// Copyright (c) 2008-2015 http://hprose.com
// Hprose is freely distributable under the MIT license.
// For all details and documentation:
// https://github.com/hprose/hprose-html5

function TimeoutError(e){Error.call(this),this.message=e,this.name=TimeoutError.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,TimeoutError)}!function(e){"use strict";e.hprose=Object.create(null)}(function(){return this||(1,eval)("this")}()),function(e){"use strict";var t="WeakMap"in e,r="Map"in e,n=!0;if(r&&(n="forEach"in new e.Map),!(t&&r&&n)){var i=Object.create(null),a=0,s=function(e){var t=Object.create(null),r=e.valueOf;Object.defineProperty(e,"valueOf",{value:function(n,a){return this===e&&a in i&&i[a]===n?(a in t||(t[a]=Object.create(null)),t[a]):r.apply(this,arguments)},writable:!0,configurable:!0,enumerable:!1})};if(t||(e.WeakMap=function l(){var e=Object.create(null),t=a++;i[t]=e;var r=function(r){if(r!==Object(r))throw new Error("value is not a non-null object");var n=r.valueOf(e,t);return n!==r.valueOf()?n:(s(r),r.valueOf(e,t))},n=Object.create(l.prototype,{get:{value:function(e){return r(e).value}},set:{value:function(e,t){r(e).value=t}},has:{value:function(e){return"value"in r(e)}},"delete":{value:function(e){return delete r(e).value}},clear:{value:function(){delete i[t],t=a++,i[t]=e}}});if(arguments.length>0&&Array.isArray(arguments[0]))for(var u=arguments[0],o=0,c=u.length;c>o;o++)n.set(u[o][0],u[o][1]);return n}),!r){var u=function(){var e=Object.create(null),t=a++,r=Object.create(null);i[t]=e;var n=function(n){if(null===n)return r;var i=n.valueOf(e,t);return i!==n.valueOf()?i:(s(n),n.valueOf(e,t))};return{get:function(e){return n(e).value},set:function(e,t){n(e).value=t},has:function(e){return"value"in n(e)},"delete":function(e){return delete n(e).value},clear:function(){delete i[t],t=a++,i[t]=e}}},o=function(){var e=Object.create(null);return{get:function(){return e.value},set:function(t,r){e.value=r},has:function(){return"value"in e},"delete":function(){return delete e.value},clear:function(){e=Object.create(null)}}},c=function(){var e=Object.create(null);return{get:function(t){return e[t]},set:function(t,r){e[t]=r},has:function(t){return t in e},"delete":function(t){return delete e[t]},clear:function(){e=Object.create(null)}}};e.Map=function h(){var e={number:c(),string:c(),"boolean":c(),object:u(),"function":u(),unknown:u(),undefined:o(),"null":o()},t=0,r=[],n=Object.create(h.prototype,{size:{get:function(){return t}},get:{value:function(t){return e[typeof t].get(t)}},set:{value:function(n,i){this.has(n)||(r.push(n),t++),e[typeof n].set(n,i)}},has:{value:function(t){return e[typeof t].has(t)}},"delete":{value:function(n){return this.has(n)?(t--,r.splice(r.indexOf(n),1),e[typeof n]["delete"](n)):!1}},clear:{value:function(){r.length=0;for(var n in e)e[n].clear();t=0}},forEach:{value:function(e,t){for(var n=0,i=r.length;i>n;n++)e.call(t,this.get(r[n]),r[n],this)}}});if(arguments.length>0&&Array.isArray(arguments[0]))for(var i=arguments[0],a=0,s=i.length;s>a;a++)n.set(i[a][0],i[a][1]);return n}}if(!n){var f=e.Map;e.Map=function g(){var e=new f,t=0,r=[],n=Object.create(g.prototype,{size:{get:function(){return t}},get:{value:function(t){return e.get(t)}},set:{value:function(n,i){e.has(n)||(r.push(n),t++),e.set(n,i)}},has:{value:function(t){return e.has(t)}},"delete":{value:function(n){return e.has(n)?(t--,r.splice(r.indexOf(n),1),e["delete"](n)):!1}},clear:{value:function(){if("clear"in e)e.clear();else for(var n=0,i=r.length;i>n;n++)e["delete"](r[n]);r.length=0,t=0}},forEach:{value:function(e,t){for(var n=0,i=r.length;i>n;n++)e.call(t,this.get(r[n]),r[n],this)}}});if(arguments.length>0&&Array.isArray(arguments[0]))for(var i=arguments[0],a=0,s=i.length;s>a;a++)n.set(i[a][0],i[a][1]);return n}}}}(function(){return this||(1,eval)("this")}()),TimeoutError.prototype=Object.create(Error.prototype),TimeoutError.prototype.constructor=TimeoutError,function(e,t){"use strict";function r(e){var r=c(arguments,1);return function(){e.apply(t,r)}}function n(t){if(v)e.setTimeout(r(n,t),0);else{var i=g[t];if(i){v=!0;try{i()}finally{a(t),v=!1}}}}function i(e){return g[h]=r.apply(t,e),h++}function a(e){delete g[e]}function s(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}var u=e.navigator&&/Trident/.test(e.navigator.userAgent);if(!u&&(e.msSetImmediate||e.setImmediate))return void(e.setImmediate||(e.setImmediate=e.msSetImmediate,e.clearImmediate=e.msClearImmediate));var o=e.document,c=Function.prototype.call.bind(Array.prototype.slice),f=Function.prototype.call.bind(Object.prototype.toString),l={},h=1,g={},v=!1;l.messageChannel=function(){var t=new e.MessageChannel;return t.port1.onmessage=function(e){n(Number(e.data))},function(){var e=i(arguments);return t.port2.postMessage(e),e}},l.nextTick=function(){return function(){var t=i(arguments);return e.process.nextTick(r(n,t)),t}},l.postMessage=function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&n(Number(r.data.slice(t.length)))};return e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),function(){var r=i(arguments);return e.postMessage(t+r,"*"),r}},l.readyStateChange=function(){var e=o.documentElement;return function(){var t=i(arguments),r=o.createElement("script");return r.onreadystatechange=function(){n(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r),t}},l.setTimeout=function(){return function(){var t=i(arguments);return e.setTimeout(r(n,t),0),t}};var y=Object.getPrototypeOf&&Object.getPrototypeOf(e);y=y&&y.setTimeout?y:e,u?y.setImmediate=l.setTimeout():"[object process]"===f(e.process)?y.setImmediate=l.nextTick():s()?y.setImmediate=l.postMessage():e.MessageChannel?y.setImmediate=l.messageChannel():o&&"onreadystatechange"in o.createElement("script")?y.setImmediate=l.readyStateChange():y.setImmediate=l.setTimeout(),y.msSetImmediate=y.setImmediate,y.clearImmediate=a,y.msClearImmediate=a}(function(){return this||(1,eval)("this")}()),function(e,t){"use strict";function r(e){Object.defineProperties(this,{_subscribers:{value:[]},resolve:{value:this.resolve.bind(this)},reject:{value:this.reject.bind(this)}});var t=this;"function"==typeof e&&M(function(){try{t.resolve(e())}catch(r){t.reject(r)}})}function n(e){return e instanceof r}function i(t){return n(t)||I&&t instanceof e.Promise&&typeof("function"===t.then)}function a(e,t){var n="function"==typeof t?t:function(){return t},i=new r;return F(function(){try{i.resolve(n())}catch(e){i.reject(e)}},e),i}function s(e){var t=new r;return t.reject(e),t}function u(e){var t=new r;return t.resolve(e),t}function o(e){try{var t=e();return u(t)}catch(r){return s(r)}}function c(e){var t=new r;return e(t.resolve,t.reject),t}function f(e){var t=0;return P(e,function(){++t}),t}function l(e){return e=i(e)?e:u(e),e.then(function(e){var t=e.length,n=f(e),a=new Array(t);if(0===n)return u(a);var s=new r;return P(e,function(e,t){var r=i(e)?e:u(e);r.then(function(e){a[t]=e,0===--n&&s.resolve(a)},s.reject)}),s})}function h(){return l(arguments)}function g(e){return e=i(e)?e:u(e),e.then(function(e){var t=new r;return P(e,function(e){var r=i(e)?e:u(e);r.then(t.resolve,t.reject)}),t})}function v(e){return e=i(e)?e:u(e),e.then(function(e){var t=e.length,n=f(e);if(0===n)throw new RangeError("any(): array must not be empty");var a=new Array(t),s=new r;return P(e,function(e,t){var r=i(e)?e:u(e);r.then(s.resolve,function(e){a[t]=e,0===--n&&s.reject(a)})}),s})}function y(e){return e=i(e)?e:u(e),e.then(function(e){var t=e.length,n=f(e),a=new Array(t);if(0===n)return u(a);var s=new r;return P(e,function(e,t){var r=i(e)?e:u(e);r.whenComplete(function(){a[t]=r.inspect(),0===--n&&s.resolve(a)})}),s})}function p(e){var r=x(arguments,1);return l(r).then(function(r){return e.apply(t,r)})}function d(e,t){var r=x(arguments,2);return l(r).then(function(r){return e.apply(t,r)})}function w(e,t){return function(){return l(arguments).then(function(r){return e.apply(t,r)})}}function m(e,t,r){return l(e).then(function(e){return e.forEach(t,r)})}function T(e,t,r){return l(e).then(function(e){return e.every(t,r)})}function b(e,t,r){return l(e).then(function(e){return e.some(t,r)})}function _(e,t,r){return l(e).then(function(e){return e.filter(t,r)})}function B(e,t,r){return l(e).then(function(e){return e.map(t,r)})}function S(e,t,r){return arguments.length>2?l(e).then(function(e){return i(r)||(r=u(r)),r.then(function(r){return e.reduce(t,r)})}):l(e).then(function(e){return e.reduce(t)})}function E(e,t,r){return arguments.length>2?l(e).then(function(e){return i(r)||(r=u(r)),r.then(function(r){return e.reduceRight(t,r)})}):l(e).then(function(e){return e.reduceRight(t)})}function O(e,t,r){M(function(){try{var n=e(r);t.resolve(n)}catch(i){t.reject(i)}})}function j(e,t,r){e?O(e,t,r):t.reject(r)}function A(e,t,r,n,a){function s(i){A(e,t,r,n,i)}function u(e){j(t,n,e)}if(i(a))return a===r?void u(new TypeError("Self resolution")):void a.then(s,u);if(null!==a&&"object"==typeof a||"function"==typeof a){var o;try{o=a.then}catch(c){return void u(c)}if("function"==typeof o){var f=!0;try{return void o.call(a,function(e){f&&(f=!1,s(e))},function(e){f&&(f=!1,u(e))})}catch(c){f&&(f=!1,u(c))}return}}e?O(e,n,a):n.resolve(a)}function C(){var e=new r;Object.defineProperties(this,{future:{value:e},complete:{value:e.resolve},completeError:{value:e.reject},isCompleted:{get:function(){return e._state!==k}}})}var k=0,R=1,U=2,I="Promise"in e,M=e.setImmediate,F=e.setTimeout,N=e.clearTimeout,P=Function.prototype.call.bind(Array.prototype.forEach),x=Function.prototype.call.bind(Array.prototype.slice);Object.defineProperties(r,{delayed:{value:a},error:{value:s},sync:{value:o},value:{value:u},all:{value:l},race:{value:g},resolve:{value:u},reject:{value:s},promise:{value:c},isFuture:{value:n},isPromise:{value:i},join:{value:h},any:{value:v},settle:{value:y},attempt:{value:p},run:{value:d},wrap:{value:w},forEach:{value:m},every:{value:T},some:{value:b},filter:{value:_},map:{value:B},reduce:{value:S},reduceRight:{value:E}}),Object.defineProperties(r.prototype,{_value:{writable:!0},_reason:{writable:!0},_state:{value:k,writable:!0},resolve:{value:function(e){if(this._state===k){this._state=R,this._value=e;for(var t=this._subscribers;t.length>0;){var r=t.shift();A(r.onfulfill,r.onreject,this,r.next,e)}}}},reject:{value:function(e){if(this._state===k){this._state=U,this._reason=e;for(var t=this._subscribers;t.length>0;){var r=t.shift();r.onreject?O(r.onreject,r.next,e):r.next.reject(e)}}}},then:{value:function(e,t){if("function"!=typeof e&&(e=null),"function"!=typeof t&&(t=null),e||t){var n=new r;return this._state===R?e?A(e,t,this,n,this._value):n.resolve(this._value):this._state===U?t?O(t,n,this._reason):n.reject(this._reason):this._subscribers.push({onfulfill:e,onreject:t,next:n}),n}return this}},inspect:{value:function(){switch(this._state){case k:return{state:"pending"};case R:return{state:"fulfilled",value:this._value};case U:return{state:"rejected",reason:this._reason}}}},catchError:{value:function(e,t){if("function"==typeof t){var r=this;return this["catch"](function(n){if(t(n))return r["catch"](e);throw n})}return this["catch"](e)}},"catch":{value:function(e){return this.then(null,e)}},whenComplete:{value:function(e){return this.then(function(r){var n=e();return n===t?r:(n=i(n)?n:u(n),n.then(function(){return r}))},function(r){var n=e();if(n===t)throw r;return n=i(n)?n:u(n),n.then(function(){throw r})})}},timeout:{value:function(e,t){var n=new r,i=F(function(){n.reject(t||new TimeoutError("timeout"))},e);return this.whenComplete(function(){N(i)}).then(n.resolve,n.reject),n}},delay:{value:function(e){var t=new r;return this.then(function(r){F(function(){t.resolve(r)},e)},t.reject),t}},tap:{value:function(e,t){return this.then(function(r){return e.call(t,r),r})}},spread:{value:function(e,t){return this.then(function(r){return e.apply(t,r)})}},get:{value:function(e){return this.then(function(t){return t[e]})}},set:{value:function(e,t){return this.then(function(r){return r[e]=t,r})}},apply:{value:function(e,t){return t=t||[],this.then(function(r){return l(t).then(function(t){return r[e].apply(r,t)})})}},call:{value:function(e){var t=x(arguments,1);return this.then(function(r){return l(t).then(function(t){return r[e].apply(r,t)})})}},bind:{value:function(e){var t=x(arguments);{if(!Array.isArray(e)){t.shift();var r=this;return Object.defineProperty(this,e,{value:function(){var n=x(arguments);return r.then(function(r){return l(t.concat(n)).then(function(t){return r[e].apply(r,t)})})}}),this}for(var n=0,i=e.length;i>n;++n)t[0]=e[n],this.bind.apply(this,t)}}},forEach:{value:function(e,t){return m(this,e,t)}},every:{value:function(e,t){return T(this,e,t)}},some:{value:function(e,t){return b(this,e,t)}},filter:{value:function(e,t){return _(this,e,t)}},map:{value:function(e,t){return B(this,e,t)}},reduce:{value:function(e,t){return arguments.length>1?S(this,e,t):S(this,e)}},reduceRight:{value:function(e,t){return arguments.length>1?E(this,e,t):E(this,e)}}}),e.hprose.Future=r,e.hprose.Completer=C,e.hprose.resolved=u,e.hprose.rejected=s,e.hprose.deferred=function(){var e=new r;return Object.create(null,{promise:{value:e},resolve:{value:e.resolve},reject:{value:e.reject}})},I||(e.Promise=function(e){r.call(this),e(this.resolve,this.reject)},e.Promise.prototype=Object.create(r.prototype),e.Promise.prototype.constructor=r,Object.defineProperties(e.Promise,{all:{value:l},race:{value:g},resolve:{value:u},reject:{value:s}}))}(function(){return this||(1,eval)("this")}()),function(e,t){"use strict";function r(e,t,r){return e[t++]=r>>>24&255,e[t++]=r>>>16&255,e[t++]=r>>>8&255,e[t++]=255&r,t}function n(e,t,r){return e[t++]=255&r,e[t++]=r>>>8&255,e[t++]=r>>>16&255,e[t++]=r>>>24&255,t}function i(e,t,r){for(var n=r.length,i=0;n>i;++i){var a=r.charCodeAt(i);if(128>a)e[t++]=a;else if(2048>a)e[t++]=192|a>>6,e[t++]=128|63&a;else{if(!(55296>a||a>57343)){if(n>i+1){var s=r.charCodeAt(i+1);if(56320>a&&s>=56320&&57343>=s){var u=((1023&a)<<10|1023&s)+65536;e[t++]=240|u>>18,e[t++]=128|u>>12&63,e[t++]=128|u>>6&63,e[t++]=128|63&u,++i;continue}}throw new Error("Malformed string")}e[t++]=224|a>>12,e[t++]=128|a>>6&63,e[t++]=128|63&a}}return t}function a(e,t){for(var r=new Uint16Array(t),n=0,i=0,a=e.length;t>n&&a>i;n++){var s=e[i++];switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:r[n]=s;break;case 12:case 13:if(!(a>i))throw new Error("Unfinished UTF-8 octet sequence");r[n]=(31&s)<<6|63&e[i++];break;case 14:if(!(a>i+1))throw new Error("Unfinished UTF-8 octet sequence");r[n]=(15&s)<<12|(63&e[i++])<<6|63&e[i++];break;case 15:if(!(a>i+2))throw new Error("Unfinished UTF-8 octet sequence");var u=((7&s)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++])-65536;if(!(u>=0&&1048575>=u))throw new Error("Character outside valid Unicode range: 0x"+u.toString(16));r[n++]=u>>10&1023|55296,r[n]=1023&u|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+s.toString(16))}}return t>n&&(r=r.subarray(0,n)),[String.fromCharCode.apply(String,r),i]}function s(e,t){for(var r=[],n=new Uint16Array(65535),i=0,a=0,s=e.length;t>i&&s>a;i++){var u=e[a++];switch(u>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n[i]=u;break;case 12:case 13:if(!(s>a))throw new Error("Unfinished UTF-8 octet sequence");n[i]=(31&u)<<6|63&e[a++];break;case 14:if(!(s>a+1))throw new Error("Unfinished UTF-8 octet sequence");n[i]=(15&u)<<12|(63&e[a++])<<6|63&e[a++];break;case 15:if(!(s>a+2))throw new Error("Unfinished UTF-8 octet sequence");var o=((7&u)<<18|(63&e[a++])<<12|(63&e[a++])<<6|63&e[a++])-65536;if(!(o>=0&&1048575>=o))throw new Error("Character outside valid Unicode range: 0x"+o.toString(16));n[i++]=o>>10&1023|55296,n[i]=1023&o|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+u.toString(16))}if(i>=65534){var c=i+1;r.push(String.fromCharCode.apply(String,n.subarray(0,c))),t-=c,i=-1}}return i>0&&r.push(String.fromCharCode.apply(String,n.subarray(0,i))),[r.join(""),a]}function u(e,r){return(r===t||null===r||0>r)&&(r=e.length),0===r?["",0]:1e5>r?a(e,r):s(e,r)}function o(e,r){if(r===t&&(r=e.length),0===r)return h;for(var n=0,i=0,a=e.length;r>n&&a>i;n++){var s=e[i++];switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:break;case 12:case 13:if(!(a>i))throw new Error("Unfinished UTF-8 octet sequence");i++;break;case 14:if(!(a>i+1))throw new Error("Unfinished UTF-8 octet sequence");i+=2;break;case 15:if(!(a>i+2))throw new Error("Unfinished UTF-8 octet sequence");var u=((7&s)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++])-65536;if(!(u>=0&&1048575>=u))throw new Error("Character outside valid Unicode range: 0x"+u.toString(16));n++;break;default:throw new Error("Bad UTF-8 encoding 0x"+s.toString(16))}}return[e.subarray(0,i),i]}function c(e){return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e+1}function f(){var e=arguments;switch(e.length){case 1:switch(e[0].constructor){case Uint8Array:this._bytes=e[0],this._length=e[0].length;break;case f:this._bytes=e[0].toBytes(),this._length=e[0].length;break;case String:this.writeString(e[0]);break;case Number:this._bytes=new Uint8Array(e[0]);break;default:this._bytes=new Uint8Array(e[0]),this._length=this._bytes.length}break;case 2:this._bytes=new Uint8Array(e[0],e[1]),this._length=e[1];break;case 3:this._bytes=new Uint8Array(e[0],e[1],e[2]),this._length=e[2]}this.mark()}function l(e){if(0===e.length)return"";switch(e.constructor){case String:return e;case f:e=e.bytes;case ArrayBuffer:e=new Uint8Array(e);case Uint8Array:return u(e,e.length)[0];default:return String.fromCharCode.apply(String,e)}}var h=(e.hprose.Future,new Uint8Array(0)),g=1024,v=Function.prototype.call.bind(Array.prototype.indexOf);Object.defineProperties(f.prototype,{_bytes:{value:null,writable:!0},_length:{value:0,writable:!0},_wmark:{value:0,writable:!0},_off:{value:0,writable:!0},_rmark:{value:0,writable:!0},_grow:{value:function(e){var t=this._bytes,r=this._length+e,n=c(r);if(t){if(n*=2,n>t.length){var i=new Uint8Array(n);i.set(t),this._bytes=i}}else n=Math.max(n,g),this._bytes=new Uint8Array(n)}},length:{get:function(){return this._length}},capacity:{get:function(){return this._bytes?this._bytes.length:0}},position:{get:function(){return this._off}},bytes:{get:function(){return null===this._bytes?h:this._bytes.subarray(0,this._length)}},mark:{value:function(){this._wmark=this._length,this._rmark=this._off}},reset:{value:function(){this._length=this._wmark,this._off=this._rmark}},clear:{value:function(){this._bytes=null,this._length=0,this._wmark=0,this._off=0,this._rmark=0}},writeByte:{value:function(e){this._grow(1),this._bytes[this._length++]=e}},writeInt32BE:{value:function(e){if(e===(0|e)&&2147483647>=e)return this._grow(4),void(this._length=r(this._bytes,this._length,e));throw new TypeError("value is out of bounds")}},writeUInt32BE:{value:function(e){if(e===(0|e)&&e>=0)return this._grow(4),void(this._length=r(this._bytes,this._length,e));throw new TypeError("value is out of bounds")}},writeInt32LE:{value:function(e){if(e===(0|e)&&2147483647>=e)return this._grow(4),void(this._length=n(this._bytes,this._length,e));throw new TypeError("value is out of bounds")}},writeUInt32LE:{value:function(e){if(e===(0|e)&&e>=0)return this._grow(4),void(this._length=n(this._bytes,this._length,e));throw new TypeError("value is out of bounds")}},write:{value:function(e){var t=e.byteLength||e.length;if(0!==t){this._grow(t);var r=this._bytes,n=this._length;switch(e.constructor){case ArrayBuffer:r.set(new Uint8Array(e),n);break;case Uint8Array:r.set(e,n);break;case f:r.set(e.bytes,n);break;default:for(var i=0;t>i;i++)r[n+i]=e[i]}this._length+=t}}},writeAsciiString:{value:function(e){var t=e.length;if(0!==t){this._grow(t);for(var r=this._bytes,n=this._length,i=0;t>i;++i,++n)r[n]=e.charCodeAt(i);this._length=n}}},writeString:{value:function(e){var t=e.length;0!==t&&(this._grow(3*t),this._length=i(this._bytes,this._length,e))}},readByte:{value:function(){return this._off<this._length?this._bytes[this._off++]:-1}},readInt32BE:{value:function(){var e=this._bytes,t=this._off;if(t+3<this._length){var r=e[t++]<<24|e[t++]<<16|e[t++]<<8|e[t++];return this._off=t,r}throw new Error("EOF")}},readUInt32BE:{value:function(){var e=this.readInt32BE();return 0>e?(2147483647&e)+2147483648:e}},readInt32LE:{value:function(){var e=this._bytes,t=this._off;if(t+3<this._length){var r=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;return this._off=t,r}throw new Error("EOF")}},readUInt32LE:{value:function(){var e=this.readInt32LE();return 0>e?(2147483647&e)+2147483648:e}},read:{value:function(e){return this._off+e>this._length&&(e=this._length-this._off),0===e?h:this._bytes.subarray(this._off,this._off+=e)}},skip:{value:function(e){return this._off+e>this._length?(e=this._length-this._off,this._off=this._length):this._off+=e,e}},readBytes:{value:function(e){var t,r=v(this._bytes,e,this._off);return-1===r?(t=this._bytes.subarray(this._off,this._length),this._off=this._length):(t=this._bytes.subarray(this._off,r+1),this._off=r+1),t}},readUntil:{value:function(e){var t=v(this._bytes,e,this._off),r="";return t===this._off?this._off++:-1===t?(r=u(this._bytes.subarray(this._off,this._length))[0],this._off=this._length):(r=u(this._bytes.subarray(this._off,t))[0],this._off=t+1),r}},readAsciiString:{value:function(e){if(this._off+e>this._length&&(e=this._length-this._off),0===e)return"";var t=this._bytes.subarray(this._off,this._off+=e);if(1e5>e)return String.fromCharCode.apply(String,t);for(var r=65535&e,n=e>>16,i=new Array(r?n+1:n),a=0;n>a;++a)i[a]=String.fromCharCode.apply(String,t.subarray(a<<16,a+1<<16));return r&&(i[n]=String.fromCharCode.apply(String,t.subarray(n<<16,e))),i.join("")}},readStringAsBytes:{value:function(e){var t=o(this._bytes.subarray(this._off,this._length),e);return this._off+=t[1],t[0]}},readString:{value:function(e){var t=u(this._bytes.subarray(this._off,this._length),e);return this._off+=t[1],t[0]}},takeBytes:{value:function(){var e=this.bytes;return this.clear(),e}},toBytes:{value:function(){return new Uint8Array(this.bytes)}},toString:{value:function(){return u(this.bytes,this._length)[0]}},clone:{value:function(){return new f(this.toBytes())}},trunc:{value:function(){this._bytes=this._bytes.subarray(this._off,this._length),this._length=this._bytes.length,this._off=0,this._wmark=0,this._rmark=0}}}),Object.defineProperty(f,"toString",{value:l}),e.hprose.BytesIO=f}(function(){return this||(1,eval)("this")}()),function(e){"use strict";e.hprose.Tags={TagInteger:105,TagLong:108,TagDouble:100,TagNull:110,TagEmpty:101,TagTrue:116,TagFalse:102,TagNaN:78,TagInfinity:73,TagDate:68,TagTime:84,TagUTC:90,TagBytes:98,TagUTF8Char:117,TagString:115,TagGuid:103,TagList:97,TagMap:109,TagClass:99,TagObject:111,TagRef:114,TagPos:43,TagNeg:45,TagSemicolon:59,TagOpenbrace:123,TagClosebrace:125,TagQuote:34,TagPoint:46,TagFunctions:70,TagCall:67,TagResult:82,TagArgument:65,TagError:69,TagEnd:122}}(function(){return this||(1,eval)("this")}()),function(e){"use strict";function t(e,t){s.set(e,t),a[t]=e}function r(e){return s.get(e)}function n(e){return a[e]}var i=e.WeakMap,a=Object.create(null),s=new i;e.hprose.ClassManager=Object.create(null,{register:{value:t},getClassAlias:{value:r},getClass:{value:n}}),e.hprose.register=t,t(Object,"Object")}(function(){return this||(1,eval)("this")}()),function(e,t){"use strict";function r(e){var t=e.constructor,r=O.getClassAlias(t);if(r)return r;if(t.name)r=t.name;else{var n=t.toString();if(r=n.substr(0,n.indexOf("(")).replace(/(^\s*function\s*)|(\s*$)/gi,""),""===r||"Object"===r)return"function"==typeof e.getClassName?e.getClassName():"Object"}return"Object"!==r&&O.register(t,r),r}function n(e){Object.defineProperties(this,{_stream:{value:e},_ref:{value:new B,writable:!0}})}function i(e){return new n(e)}function a(e,t){Object.defineProperties(this,{stream:{value:e},_classref:{value:Object.create(null),writable:!0},_fieldsref:{value:[],writable:!0},_refer:{value:t?j:i(e)}})}function s(e,n){var i=e.stream;if(n===t||null===n)return void i.writeByte(E.TagNull);switch(n.constructor){case Function:return void i.writeByte(E.TagNull);case Number:return void u(e,n);case Boolean:return void f(e,n);case String:switch(n.length){case 0:return void i.writeByte(E.TagEmpty);case 1:return i.writeByte(E.TagUTF8Char),void i.writeString(n)}return void e.writeStringWithRef(n);case Date:return void e.writeDateWithRef(n);case B:return void e.writeMapWithRef(n);case ArrayBuffer:case Uint8Array:case S:return void e.writeBytesWithRef(n);case Int8Array:case Int16Array:case Int32Array:case Uint16Array:case Uint32Array:return void d(e,n);case Float32Array:case Float64Array:return void w(e,n);default:if(Array.isArray(n))e.writeListWithRef(n);else{var a=r(n);"Object"===a?e.writeMapWithRef(n):e.writeObjectWithRef(n)}}}function u(e,t){var r=e.stream;t=t.valueOf(),t===(0|t)?t>=0&&9>=t?r.writeByte(t+48):(r.writeByte(E.TagInteger),r.writeAsciiString(""+t),r.writeByte(E.TagSemicolon)):isNaN(t)?r.writeByte(E.TagNaN):isFinite(t)?(r.writeByte(E.TagDouble),r.writeAsciiString(""+t),r.writeByte(E.TagSemicolon)):(r.writeByte(E.TagInfinity),r.writeByte(t>0?E.TagPos:E.TagNeg))}function o(e,t){var r=e.stream;t>=0&&9>=t?r.writeByte(t+48):(-2147483648>t||t>2147483647?r.writeByte(E.TagLong):r.writeByte(E.TagInteger),r.writeAsciiString(""+t),r.writeByte(E.TagSemicolon))}function c(e,t){var r=e.stream;isNaN(t)?r.writeByte(E.TagNaN):isFinite(t)?(r.writeByte(E.TagDouble),r.writeAsciiString(""+t),r.writeByte(E.TagSemicolon)):(r.writeByte(E.TagInfinity),r.writeByte(t>0?E.TagPos:E.TagNeg))}function f(e,t){e.stream.writeByte(t.valueOf()?E.TagTrue:E.TagFalse)}function l(e,t){e._refer.set(t);var r=e.stream,n=("0000"+t.getUTCFullYear()).slice(-4),i=("00"+(t.getUTCMonth()+1)).slice(-2),a=("00"+t.getUTCDate()).slice(-2),s=("00"+t.getUTCHours()).slice(-2),u=("00"+t.getUTCMinutes()).slice(-2),o=("00"+t.getUTCSeconds()).slice(-2),c=("000"+t.getUTCMilliseconds()).slice(-3);r.writeByte(E.TagDate),r.writeAsciiString(n+i+a),r.writeByte(E.TagTime),r.writeAsciiString(s+u+o),"000"!==c&&(r.writeByte(E.TagPoint),r.writeAsciiString(c)),r.writeByte(E.TagUTC)}function h(e,t){e._refer.set(t);var r=e.stream,n=("0000"+t.getFullYear()).slice(-4),i=("00"+(t.getMonth()+1)).slice(-2),a=("00"+t.getDate()).slice(-2),s=("00"+t.getHours()).slice(-2),u=("00"+t.getMinutes()).slice(-2),o=("00"+t.getSeconds()).slice(-2),c=("000"+t.getMilliseconds()).slice(-3);"00"===s&&"00"===u&&"00"===o&&"000"===c?(r.writeByte(E.TagDate),r.writeAsciiString(n+i+a)):"1970"===n&&"01"===i&&"01"===a?(r.writeByte(E.TagTime),r.writeAsciiString(s+u+o),"000"!==c&&(r.writeByte(E.TagPoint),r.writeAsciiString(c))):(r.writeByte(E.TagDate),r.writeAsciiString(n+i+a),r.writeByte(E.TagTime),r.writeAsciiString(s+u+o),"000"!==c&&(r.writeByte(E.TagPoint),r.writeAsciiString(c))),r.writeByte(E.TagSemicolon)}function g(e,t){e._refer.set(t);var r=e.stream,n=("00"+t.getHours()).slice(-2),i=("00"+t.getMinutes()).slice(-2),a=("00"+t.getSeconds()).slice(-2),s=("000"+t.getMilliseconds()).slice(-3);r.writeByte(E.TagTime),r.writeAsciiString(n+i+a),"000"!==s&&(r.writeByte(E.TagPoint),r.writeAsciiString(s)),r.writeByte(E.TagSemicolon)}function v(e,t){e._refer.set(t);var r=e.stream;r.writeByte(E.TagBytes);var n=t.byteLength||t.length;n>0&&r.writeAsciiString(""+n),r.writeByte(E.TagQuote),n>0&&r.write(t),r.writeByte(E.TagQuote)}function y(e,t){e._refer.set(t);var r=e.stream,n=t.length;r.writeByte(E.TagString),n>0&&r.writeAsciiString(""+n),r.writeByte(E.TagQuote),n>0&&r.writeString(t),r.writeByte(E.TagQuote)}function p(e,t,r){e._refer.set(t);var n=e.stream,i=t.length;n.writeByte(E.TagList),i>0&&n.writeAsciiString(""+i),n.writeByte(E.TagOpenbrace);for(var a=0;i>a;a++)r(e,t[a]);n.writeByte(E.TagClosebrace)}function d(e,t){e._refer.write(t)||p(e,t,o)}function w(e,t){e._refer.write(t)||p(e,t,c)}function m(e,t){e._refer.set(t);var r=e.stream,n=[];for(var i in t)t.hasOwnProperty(i)&&"function"!=typeof t[i]&&(n[n.length]=i);var a=n.length;r.writeByte(E.TagMap),a>0&&r.writeAsciiString(""+a),r.writeByte(E.TagOpenbrace);for(var u=0;a>u;u++)s(e,n[u]),s(e,t[n[u]]);r.writeByte(E.TagClosebrace)}function T(e,t){e._refer.set(t);var r=e.stream,n=t.size;r.writeByte(E.TagMap),n>0&&r.writeAsciiString(""+n),r.writeByte(E.TagOpenbrace),t.forEach(function(t,r){s(e,r),s(e,t)}),r.writeByte(E.TagClosebrace)}function b(e,t){var n,i,a=e.stream,u=r(t);if(u in e._classref)i=e._classref[u],n=e._fieldsref[i];else{n=[];for(var o in t)t.hasOwnProperty(o)&&"function"!=typeof t[o]&&(n[n.length]=o.toString());i=_(e,u,n)}a.writeByte(E.TagObject),a.writeAsciiString(""+i),a.writeByte(E.TagOpenbrace),e._refer.set(t);for(var c=n.length,f=0;c>f;f++)s(e,t[n[f]]);a.writeByte(E.TagClosebrace)}function _(e,t,r){var n=e.stream,i=r.length;n.writeByte(E.TagClass),n.writeAsciiString(""+t.length),n.writeByte(E.TagQuote),n.writeString(t),n.writeByte(E.TagQuote),i>0&&n.writeAsciiString(""+i),n.writeByte(E.TagOpenbrace);for(var a=0;i>a;a++)y(e,r[a]);n.writeByte(E.TagClosebrace);var s=e._fieldsref.length;return e._classref[t]=s,e._fieldsref[s]=r,s}var B=e.Map,S=e.hprose.BytesIO,E=e.hprose.Tags,O=e.hprose.ClassManager,j=Object.create(null,{set:{value:function(){}},write:{value:function(){return!1}},reset:{value:function(){}}});Object.defineProperties(n.prototype,{_refcount:{value:0,writable:!0},set:{value:function(e){this._ref.set(e,this._refcount++)}},write:{value:function(e){var r=this._ref.get(e);return r!==t?(this._stream.writeByte(E.TagRef),this._stream.writeString(""+r),this._stream.writeByte(E.TagSemicolon),!0):!1}},reset:{value:function(){this._ref=new B,this._refcount=0}}}),Object.defineProperties(a.prototype,{serialize:{value:function(e){s(this,e)}},writeInteger:{value:function(e){o(this,e)}},writeDouble:{value:function(e){c(this,e)}},writeBoolean:{value:function(e){f(this,e)}},writeUTCDate:{value:function(e){l(this,e)}},writeUTCDateWithRef:{value:function(e){this._refer.write(e)||l(this,e)}},writeDate:{value:function(e){h(this,e)}},writeDateWithRef:{value:function(e){this._refer.write(e)||h(this,e)}},writeTime:{value:function(e){g(this,e)}},writeTimeWithRef:{value:function(e){this._refer.write(e)||g(this,e)}},writeBytes:{value:function(e){v(this,e)}},writeBytesWithRef:{value:function(e){this._refer.write(e)||v(this,e)}},writeString:{value:function(e){y(this,e)}},writeStringWithRef:{value:function(e){this._refer.write(e)||y(this,e)}},writeList:{value:function(e){p(this,e,s)}},writeListWithRef:{value:function(e){this._refer.write(e)||p(this,e,s)}},writeMap:{value:function(e){e instanceof B?T(this,e):m(this,e)}},writeMapWithRef:{value:function(e){this._refer.write(e)||(e instanceof B?T(this,e):m(this,e))}},writeObject:{value:function(e){b(this,e)}},writeObjectWithRef:{value:function(e){this._refer.write(e)||b(this,e)}},reset:{value:function(){this._classref=Object.create(null),this._fieldsref.length=0,this._refer.reset()}}}),e.hprose.Writer=a}(function(){return this||(1,eval)("this")}()),function(e,t){"use strict";function r(e,t){if(e&&t){var r="";throw r="number"==typeof t?String.fromCharCode(t):String.fromCharCode.apply(String,t),new Error('Tag "'+r+'" expected, but "'+String.fromCharCode(e)+'" found in stream')}throw e?new Error('Unexpected serialize tag "'+String.fromCharCode(e)+'" in stream'):new Error("No byte found in stream")}function n(e){var t=new Z;return i(e,t),t.bytes}function i(e,t){a(e,t,e.readByte())}function a(e,t,n){switch(t.writeByte(n),n){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case ee.TagNull:case ee.TagEmpty:case ee.TagTrue:case ee.TagFalse:case ee.TagNaN:break;case ee.TagInfinity:t.writeByte(e.readByte());break;case ee.TagInteger:case ee.TagLong:case ee.TagDouble:case ee.TagRef:s(e,t);break;case ee.TagDate:case ee.TagTime:u(e,t);break;case ee.TagUTF8Char:o(e,t);break;case ee.TagBytes:c(e,t);break;case ee.TagString:f(e,t);break;case ee.TagGuid:l(e,t);break;case ee.TagList:case ee.TagMap:case ee.TagObject:h(e,t);break;case ee.TagClass:h(e,t),i(e,t);break;case ee.TagError:i(e,t);break;default:r(n)}}function s(e,t){var r;do r=e.readByte(),t.writeByte(r);while(r!==ee.TagSemicolon)}function u(e,t){var r;do r=e.readByte(),
t.writeByte(r);while(r!==ee.TagSemicolon&&r!==ee.TagUTC)}function o(e,t){t.writeString(e.readString(1))}function c(e,t){var r=0,n=48;do r*=10,r+=n-48,n=e.readByte(),t.writeByte(n);while(n!==ee.TagQuote);t.write(e.read(r+1))}function f(e,t){var r=0,n=48;do r*=10,r+=n-48,n=e.readByte(),t.writeByte(n);while(n!==ee.TagQuote);t.write(e.readStringAsBytes(r+1))}function l(e,t){t.write(e.read(38))}function h(e,t){var r;do r=e.readByte(),t.writeByte(r);while(r!==ee.TagOpenbrace);for(;(r=e.readByte())!==ee.TagClosebrace;)a(e,t,r);t.writeByte(r)}function g(e){Object.defineProperties(this,{stream:{value:e},readRaw:{value:function(){return n(e)}}})}function v(){Object.defineProperties(this,{ref:{value:[]}})}function y(){return new v}function p(r){var n,i=e,a=r.split(".");for(n=0;n<a.length;n++)if(i=i[a[n]],i===t)return null;return i}function d(e,t,r,n){if(r<t.length){var i=t[r];e[i]=n;var a=d(e,t,r+1,".");return r+1<t.length&&null===a&&(a=d(e,t,r+1,"_")),a}var s=e.join("");try{var u=p(s);return"function"==typeof u?u:null}catch(o){return null}}function w(e){var t=te.getClass(e);if(t)return t;if(t=p(e),"function"==typeof t)return te.register(t,e),t;for(var r=[],n=e.indexOf("_");n>=0;)r[r.length]=n,n=e.indexOf("_",n+1);if(r.length>0){var i=e.split("");if(t=d(i,r,0,"."),null===t&&(t=d(i,r,0,"_")),"function"==typeof t)return te.register(t,e),t}return t=function(){},Object.defineProperty(t.prototype,"getClassName",{value:function(){return e}}),te.register(t,e),t}function m(e,t){var r=e.readUntil(t);return 0===r.length?0:parseInt(r,10)}function T(e){var t=e.stream,n=t.readByte();switch(n){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return n-48;case ee.TagInteger:return b(t);case ee.TagLong:return B(t);case ee.TagDouble:return E(t);case ee.TagNull:return null;case ee.TagEmpty:return"";case ee.TagTrue:return!0;case ee.TagFalse:return!1;case ee.TagNaN:return NaN;case ee.TagInfinity:return j(t);case ee.TagDate:return C(e);case ee.TagTime:return R(e);case ee.TagBytes:return I(e);case ee.TagUTF8Char:return F(e);case ee.TagString:return P(e);case ee.TagGuid:return W(e);case ee.TagList:return D(e);case ee.TagMap:return e.useHarmonyMap?Q(e):z(e);case ee.TagClass:return $(e),Y(e);case ee.TagObject:return J(e);case ee.TagRef:return V(e);case ee.TagError:throw new Error(x(e));default:r(n)}}function b(e){return m(e,ee.TagSemicolon)}function _(e){var t=e.readByte();switch(t){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return t-48;case ee.TagInteger:return b(e);default:r(t)}}function B(e){var t=e.readUntil(ee.TagSemicolon),r=parseInt(t,10);return r.toString()===t?r:t}function S(e){var t=e.readByte();switch(t){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return t-48;case ee.TagInteger:case ee.TagLong:return B(e);default:r(t)}}function E(e){return parseFloat(e.readUntil(ee.TagSemicolon))}function O(e){var t=e.readByte();switch(t){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return t-48;case ee.TagInteger:case ee.TagLong:case ee.TagDouble:return E(e);case ee.TagNaN:return NaN;case ee.TagInfinity:return j(e);default:r(t)}}function j(e){return e.readByte()===ee.TagNeg?-(1/0):1/0}function A(e){var t=e.readByte();switch(t){case ee.TagTrue:return!0;case ee.TagFalse:return!1;default:r(t)}}function C(e){var t,r=e.stream,n=parseInt(r.readAsciiString(4),10),i=parseInt(r.readAsciiString(2),10)-1,a=parseInt(r.readAsciiString(2),10),s=r.readByte();if(s===ee.TagTime){var u=parseInt(r.readAsciiString(2),10),o=parseInt(r.readAsciiString(2),10),c=parseInt(r.readAsciiString(2),10),f=0;s=r.readByte(),s===ee.TagPoint&&(f=parseInt(r.readAsciiString(3),10),s=r.readByte(),s>=48&&57>=s&&(r.skip(2),s=r.readByte(),s>=48&&57>=s&&(r.skip(2),s=r.readByte()))),t=s===ee.TagUTC?new Date(Date.UTC(n,i,a,u,o,c,f)):new Date(n,i,a,u,o,c,f)}else t=s===ee.TagUTC?new Date(Date.UTC(n,i,a)):new Date(n,i,a);return e.refer.set(t),t}function k(e){var t=e.stream.readByte();switch(t){case ee.TagNull:return null;case ee.TagDate:return C(e);case ee.TagRef:return V(e);default:r(t)}}function R(e){var t,r=e.stream,n=parseInt(r.readAsciiString(2),10),i=parseInt(r.readAsciiString(2),10),a=parseInt(r.readAsciiString(2),10),s=0,u=r.readByte();return u===ee.TagPoint&&(s=parseInt(r.readAsciiString(3),10),u=r.readByte(),u>=48&&57>=u&&(r.skip(2),u=r.readByte(),u>=48&&57>=u&&(r.skip(2),u=r.readByte()))),t=u===ee.TagUTC?new Date(Date.UTC(1970,0,1,n,i,a,s)):new Date(1970,0,1,n,i,a,s),e.refer.set(t),t}function U(e){var t=e.stream.readByte();switch(t){case ee.TagNull:return null;case ee.TagTime:return R(e);case ee.TagRef:return V(e);default:r(t)}}function I(e){var t=e.stream,r=m(t,ee.TagQuote),n=t.read(r);return t.skip(1),e.refer.set(n),n}function M(e){var t=e.stream.readByte();switch(t){case ee.TagNull:return null;case ee.TagEmpty:return new Uint8Array(0);case ee.TagBytes:return I(e);case ee.TagRef:return V(e);default:r(t)}}function F(e){return e.stream.readString(1)}function N(e){var t=e.stream,r=t.readString(m(t,ee.TagQuote));return t.skip(1),r}function P(e){var t=N(e);return e.refer.set(t),t}function x(e){var t=e.stream.readByte();switch(t){case ee.TagNull:return null;case ee.TagEmpty:return"";case ee.TagUTF8Char:return F(e);case ee.TagString:return P(e);case ee.TagRef:return V(e);default:r(t)}}function W(e){var t=e.stream;t.skip(1);var r=t.readAsciiString(36);return t.skip(1),e.refer.set(r),r}function L(e){var t=e.stream.readByte();switch(t){case ee.TagNull:return null;case ee.TagGuid:return W(e);case ee.TagRef:return V(e);default:r(t)}}function D(e){var t=e.stream,r=[];e.refer.set(r);for(var n=m(t,ee.TagOpenbrace),i=0;n>i;i++)r[i]=T(e);return t.skip(1),r}function H(e){var t=e.stream.readByte();switch(t){case ee.TagNull:return null;case ee.TagList:return D(e);case ee.TagRef:return V(e);default:r(t)}}function z(e){var t=e.stream,r={};e.refer.set(r);for(var n=m(t,ee.TagOpenbrace),i=0;n>i;i++){var a=T(e),s=T(e);r[a]=s}return t.skip(1),r}function q(e){var t=e.stream.readByte();switch(t){case ee.TagNull:return null;case ee.TagMap:return z(e);case ee.TagRef:return V(e);default:r(t)}}function Q(e){var t=e.stream,r=new K;e.refer.set(r);for(var n=m(t,ee.TagOpenbrace),i=0;n>i;i++){var a=T(e),s=T(e);r.set(a,s)}return t.skip(1),r}function G(e){var t=e.stream.readByte();switch(t){case ee.TagNull:return null;case ee.TagMap:return Q(e);case ee.TagRef:return V(e);default:r(t)}}function J(e){var t=e.stream,r=e.classref[m(t,ee.TagOpenbrace)],n=new r.classname;e.refer.set(n);for(var i=0;i<r.count;i++)n[r.fields[i]]=T(e);return t.skip(1),n}function Y(e){var t=e.stream.readByte();switch(t){case ee.TagNull:return null;case ee.TagClass:return $(e),Y(e);case ee.TagObject:return J(e);case ee.TagRef:return V(e);default:r(t)}}function $(e){for(var t=e.stream,r=N(e),n=m(t,ee.TagOpenbrace),i=[],a=0;n>a;a++)i[a]=x(e);t.skip(1),r=w(r),e.classref.push({classname:r,count:n,fields:i})}function V(e){return e.refer.read(m(e.stream,ee.TagSemicolon))}function X(e,t,r){g.call(this,e),this.useHarmonyMap=!!r,Object.defineProperties(this,{classref:{value:[]},refer:{value:t?re:y()}})}var K=e.Map,Z=e.hprose.BytesIO,ee=e.hprose.Tags,te=e.hprose.ClassManager;e.hprose.RawReader=g;var re=Object.create(null,{set:{value:function(){}},read:{value:function(){r(ee.TagRef)}},reset:{value:function(){}}});Object.defineProperties(v.prototype,{set:{value:function(e){this.ref.push(e)}},read:{value:function(e){return this.ref[e]}},reset:{value:function(){this.ref.length=0}}}),X.prototype=Object.create(g.prototype),X.prototype.constructor=X,Object.defineProperties(X.prototype,{useHarmonyMap:{value:!1,writable:!0},checkTag:{value:function(e,n){n===t&&(n=this.stream.readByte()),n!==e&&r(n,e)}},checkTags:{value:function(e,n){return n===t&&(n=this.stream.readByte()),e.indexOf(n)>=0?n:void r(n,e)}},unserialize:{value:function(){return T(this)}},readInteger:{value:function(){return _(this.stream)}},readLong:{value:function(){return S(this.stream)}},readDouble:{value:function(){return O(this.stream)}},readBoolean:{value:function(){return A(this.stream)}},readDateWithoutTag:{value:function(){return C(this)}},readDate:{value:function(){return k(this)}},readTimeWithoutTag:{value:function(){return R(this)}},readTime:{value:function(){return U(this)}},readBytesWithoutTag:{value:function(){return I(this)}},readBytes:{value:function(){return M(this)}},readStringWithoutTag:{value:function(){return P(this)}},readString:{value:function(){return x(this)}},readGuidWithoutTag:{value:function(){return W(this)}},readGuid:{value:function(){return L(this)}},readListWithoutTag:{value:function(){return D(this)}},readList:{value:function(){return H(this)}},readMapWithoutTag:{value:function(){return this.useHarmonyMap?Q(this):z(this)}},readMap:{value:function(){return this.useHarmonyMap?G(this):q(this)}},readObjectWithoutTag:{value:function(){return J(this)}},readObject:{value:function(){return Y(this)}},reset:{value:function(){this.classref.length=0,this.refer.reset()}}}),e.hprose.Reader=X}(function(){return this||(1,eval)("this")}()),function(e){"use strict";function t(e,t){var r=new n,a=new i(r,t);return a.serialize(e),r}function r(e,t,r){return e instanceof n||(e=new n(e)),new a(e,t,r).unserialize()}var n=e.hprose.BytesIO,i=e.hprose.Writer,a=e.hprose.Reader;e.hprose.Formatter={serialize:function(e,r){return t(e,r).bytes},unserialize:r},e.hprose.serialize=t,e.hprose.unserialize=r}(function(){return this||(1,eval)("this")}()),function(e){"use strict";e.hprose.ResultMode={Normal:0,Serialized:1,Raw:2,RawWithEndTag:3},e.hprose.Normal=e.hprose.ResultMode.Normal,e.hprose.Serialized=e.hprose.ResultMode.Serialized,e.hprose.Raw=e.hprose.ResultMode.Raw,e.hprose.RawWithEndTag=e.hprose.ResultMode.RawWithEndTag}(function(){return this||(1,eval)("this")}()),function(e,t){"use strict";function r(){}function n(n,i,a){function T(e,t){for(var r=0,n=He.length;n>r;r++)e=He[r].outputFilter(e,t);return e}function b(e,t){for(var r=He.length-1;r>=0;r--)e=He[r].inputFilter(e,t);return e}function _(e,t){return e=T(e,t),Ke(e,t).then(function(e){return t.oneway?void 0:b(e,t)})}function B(e,t){return nt.sendAndReceive(e,t)}function S(e,t,r,n){Xe(e,t).then(r,function(i){E(e,t,r,n)||n(i)})}function E(t,r,n,i){if(r.failswitch&&++Re>=ke.length&&(Re=0,Ce=ke[Re]),r.idempotent&&--r.retry>=0){var a=500*(10-r.retry);return r.retry>10&&(a=500),e.setTimeout(function(){S(t,r,n,i)},a),!0}return!1}function O(e){var t={retry:Fe,idempotent:!0,failswitch:!0,timeout:Me,client:nt,userdata:{}},r=function(t){var r=null;try{var n=new c(t),i=new l(n,!0),a=n.readByte();switch(a){case u.TagError:r=new Error(i.readString());break;case u.TagFunctions:var s=i.readList();i.checkTag(u.TagEnd),C(e,s);break;default:r=new Error("Wrong Response:\r\n"+c.toString(t))}}catch(o){r=o}null!==r?Qe.reject(r):Qe.resolve(e)};S(v,t,r,Qe.reject)}function j(e,t){return function(){return ze?F(e,t,g(arguments),!0):h.all(arguments).then(function(r){return F(e,t,r,!1)})}}function A(e,r,n,i,a){if(r[i]===t&&(r[i]={},(typeof a===p||a.constructor===Object)&&(a=[a]),Array.isArray(a)))for(var s=0;s<a.length;s++){var u=a[s];if(typeof u===p)r[i][u]=j(e,n+i+"_"+u);else for(var o in u)A(e,r[i],i+"_",o,u[o])}}function C(e,r){for(var n=0;n<r.length;n++){var i=r[n];if(typeof i===p)e[i]===t&&(e[i]=j(e,i));else for(var a in i)A(e,e,"",a,i[a])}}function k(e,t){for(var r=Math.min(e.length,t.length),n=0;r>n;++n)t[n]=e[n]}function R(e){return e?{mode:o.Normal,byref:Ue,simple:Ie,onsuccess:t,onerror:t,useHarmonyMap:Le,client:nt,userdata:{}}:{mode:o.Normal,byref:Ue,simple:Ie,timeout:Me,retry:Fe,idempotent:Ne,failswitch:Pe,oneway:!1,sync:!1,onsuccess:t,onerror:t,useHarmonyMap:Le,client:nt,userdata:{}}}function U(e,t,r,n){var i=R(n);if(t in e){var a=e[t];for(var s in a)s in i&&(i[s]=a[s])}for(var u=0,o=r.length;o>u&&typeof r[u]!==w;++u);if(u===o)return i;var c=r.splice(u,o-u);for(i.onsuccess=c[0],o=c.length,u=1;o>u;++u){var f=c[u];switch(typeof f){case w:i.onerror=f;break;case y:i.byref=f;break;case d:i.mode=f;break;case m:for(var l in f)l in i&&(i[l]=f[l])}}return i}function I(e,t,r){var n=new c;n.writeByte(u.TagCall);var i=new f(n,r.simple);return i.writeString(e),(t.length>0||r.byref)&&(i.reset(),i.writeList(t),r.byref&&i.writeBoolean(!0)),n}function M(e,t,r,n){return xe?h.promise(function(i,a){We.push({batch:n,name:e,args:t,context:r,resolve:i,reject:a})}):n?D(e,t,r):L(e,t,r)}function F(e,t,r,n){return M(t,r,U(e,t,r,n),n)}function N(e,t,r,n){try{r.onerror?r.onerror(e,t):De(e,t),n(t)}catch(i){n(i)}}function P(e,t,r){var n=r.name,i=r.args,a=r.context,s=I(n,i,a);s.writeByte(u.TagEnd),S(s.bytes,a,function(n){if(a.oneway)return void e();var s=null,f=null;try{if(a.mode===o.RawWithEndTag)s=n;else if(a.mode===o.Raw)s=n.subarray(0,n.byteLength-1);else{var h=new c(n),g=new l(h,!1,a.useHarmonyMap),v=h.readByte();if(v===u.TagResult){if(s=a.mode===o.Serialized?g.readRaw():g.unserialize(),v=h.readByte(),v===u.TagArgument){g.reset();var y=g.readList();k(y,i),v=h.readByte()}}else v===u.TagError&&(f=new Error(g.readString()),v=h.readByte());v!==u.TagEnd&&(f=new Error("Wrong Response:\r\n"+c.toString(n)))}if(f)throw f}catch(p){f=p}f?t(f,r):e(s,r)},t)}function x(t,r,n){return r.length>0&&r[r.length-1]&&"function"==typeof r[r.length-1].handler?h.promise(function(e,i){var a=r[r.length-1],s={name:t,args:r.slice(0,r.length-1),udata:a,invoke:P,context:n};for(var u in a)"handler"!=u&&a.hasOwnProperty(u)&&(s[u]=a[u]);a.handler(s,e,i)}):"function"==typeof e.hprose.userdefInvoke?h.promise(function(i,a){var s={name:t,args:r,udata:null,invoke:P,context:n};e.hprose.userdefInvoke(s,i,a)}):h.promise(function(e,i){var a={name:t,args:r,context:n};P(e,i,a)})}function W(e){return function(){e&&(xe=!1,s(function(e){e.forEach(function(e){"settings"in e?Q(e.settings).then(e.resolve,e.reject):M(e.name,e.args,e.context,e.batch).then(e.resolve,e.reject)})},We),We=[])}}function L(e,t,r){r.sync&&(xe=!0);var n=h.promise(function(n,i){$e(e,t,r).then(function(a){try{if(r.onsuccess)try{r.onsuccess(a,t)}catch(s){r.onerror&&r.onerror(e,s),i(s)}n(a)}catch(s){i(s)}},function(t){N(e,t,r,i)})});return n.whenComplete(W(r.sync)),n}function D(e,t,r){return h.promise(function(n,i){qe.push({args:t,name:e,context:r,resolve:n,reject:i})})}function H(e){var t={timeout:Me,retry:Fe,idempotent:Ne,failswitch:Pe,oneway:!1,sync:!1,client:nt,userdata:{}};for(var r in e)r in t&&(t[r]=e[r]);return t}function z(e,t){var r=e.reduce(function(e,t){return e.write(I(t.name,t.args,t.context)),e},new c);return r.writeByte(u.TagEnd),h.promise(function(n,i){S(r.bytes,t,function(r){if(t.oneway)return void n(e);var a=-1,s=new c(r),f=new l(s,!1),h=s.readByte();try{for(;h!==u.TagEnd;){var g=null,v=null,y=e[++a].context.mode;if(y>=o.Raw&&(g=new c),h===u.TagResult){if(y===o.Serialized?g=f.readRaw():y>=o.Raw?(g.writeByte(u.TagResult),g.write(f.readRaw())):(f.useHarmonyMap=e[a].context.useHarmonyMap,f.reset(),g=f.unserialize()),h=s.readByte(),h===u.TagArgument){if(y>=o.Raw)g.writeByte(u.TagArgument),g.write(f.readRaw());else{f.reset();var p=f.readList();k(p,e[a].args)}h=s.readByte()}}else h===u.TagError&&(y>=o.Raw?(g.writeByte(u.TagError),g.write(f.readRaw())):(f.reset(),v=new Error(f.readString())),h=s.readByte());if([u.TagEnd,u.TagResult,u.TagError].indexOf(h)<0)return void i(new Error("Wrong Response:\r\n"+c.toString(r)));y>=o.Raw?(y===o.RawWithEndTag&&g.writeByte(u.TagEnd),e[a].result=g.bytes):e[a].result=g,e[a].error=v}}catch(d){return void i(d)}n(e)},i)})}function q(){ze=!0}function Q(e){if(e=e||{},ze=!1,xe)return h.promise(function(t,r){We.push({batch:!0,settings:e,resolve:t,reject:r})});var t=qe.length;if(0!==t){var r=H(e);r.sync&&(xe=!0);var n=qe;qe=[];var i=h.promise(function(e,t){Ve(n,r).then(function(t){t.forEach(function(e){if(e.error)N(e.name,e.error,e.context,e.reject);else try{if(e.context.onsuccess)try{e.context.onsuccess(e.result,e.args)}catch(t){e.context.onerror&&e.context.onerror(e.name,t),e.reject(t)}e.resolve(e.result)}catch(t){e.reject(t)}delete e.context,delete e.resolve,delete e.reject}),e(t)},function(e){n.forEach(function(t){"reject"in t&&N(t.name,e,t.context,t.reject)}),t(e)})});return i.whenComplete(W(r.sync)),i}}function G(){return De}function J(e){typeof e===w&&(De=e)}function Y(){return Ce}function $(){return Pe}function V(e){Pe=!!e}function X(){return Me}function K(e){Me="number"==typeof e?0|e:0}function Z(){return Fe}function ee(e){Fe="number"==typeof e?0|e:0}function te(){return Ne}function re(e){Ne=!!e}function ne(e){Ye=!!e}function ie(){return Ye}function ae(){return Ue}function se(e){Ue=!!e}function ue(){return Ie}function oe(e){Ie=!!e}function ce(){return Le}function fe(e){Le=!!e}function le(){return 0===He.length?null:1===He.length?He[0]:He.slice()}function he(e){He.length=0,Array.isArray(e)?e.forEach(function(e){ge(e)}):ge(e)}function ge(e){e&&"function"==typeof e.inputFilter&&"function"==typeof e.outputFilter&&He.push(e)}function ve(e){var t=He.indexOf(e);return-1===t?!1:(He.splice(t,1),!0)}function ye(e,r,n){n===t&&(typeof r===y&&(n=r,r=!1),r||(typeof e===y?(n=e,e=!1):(e&&e.constructor===Object||Array.isArray(e))&&(r=e,e=!1)));var i=nt;return n&&(i={}),e||Ce?(e&&(Ce=e),(typeof r===p||r&&r.constructor===Object)&&(r=[r]),Array.isArray(r)?(C(i,r),Qe.resolve(i),i):(s(O,i),Qe)):new Error("You should set server uri first!")}function pe(e,t,n){var i=arguments.length;if(1>i||typeof e!==p)throw new Error("name must be a string");if(1===i&&(t=[]),2===i&&!Array.isArray(t)){var a=[];typeof t!==w&&a.push(r),a.push(t),t=a}if(i>2){typeof n!==w&&t.push(r);for(var s=2;i>s;s++)t.push(arguments[s])}return F(nt,e,t,ze)}function de(e,t){return Qe.then(e,t)}function we(e,t,r){if(Ge[e]){var n=Ge[e];return n[t]?n[t]:null}return r&&(Ge[e]=Object.create(null)),null}function me(e,r,n,i){if(typeof e!==p)throw new TypeError("topic name must be a string.");if(r===t||null===r){if(typeof n!==w)throw new TypeError("callback must be a function.");r=n}if(typeof r===w)return i=n,n=r,null===Je&&(Je=Be()),void Je.then(function(t){me(e,t,n,i)});if(typeof n!==w)throw new TypeError("callback must be a function.");if(h.isPromise(r))return void r.then(function(t){me(e,t,n,i)});i===t&&(i=Me);var a=we(e,r,!0);if(null===a){var s=function(){F(nt,e,[r,a.handler,s,{idempotent:!0,failswitch:!1,timeout:i}],!1)};a={handler:function(t){var n=we(e,r,!1);if(n){if(null!==t)for(var i=n.callbacks,a=0,u=i.length;u>a;++a)try{i[a](t)}catch(o){}null!==we(e,r,!1)&&s()}},callbacks:[n]},Ge[e][r]=a,s()}else a.callbacks.indexOf(n)<0&&a.callbacks.push(n)}function Te(e,t,r){if(e)if(typeof r===w){var n=e[t];if(n){var i=n.callbacks,a=i.indexOf(r);a>=0&&(i[a]=i[i.length-1],i.length--),0===i.length&&delete e[t]}}else delete e[t]}function be(e,r,n){if(typeof e!==p)throw new TypeError("topic name must be a string.");if(r===t||null===r){if(typeof n!==w)return void delete Ge[e];r=n}if(typeof r===w&&(n=r,r=null),null===r)if(null===Je){if(Ge[e]){var i=Ge[e];for(r in i)Te(i,r,n)}}else Je.then(function(t){be(e,t,n)});else h.isPromise(r)?r.then(function(t){be(e,t,n)}):Te(Ge[e],r,n)}function _e(){return Je}function Be(){return F(nt,"#",[],!1)}function Se(e){Ze.push(e),$e=Ze.reduceRight(function(e,t){return function(r,n,i){try{var a=t(r,n,i,e);return h.isFuture(a)?a:h.value(a)}catch(s){return h.error(s)}}},x)}function Ee(e){et.push(e),Ve=et.reduceRight(function(e,t){return function(r,n){try{var i=t(r,n,e);return h.isFuture(i)?i:h.value(i)}catch(a){return h.error(a)}}},z)}function Oe(e){tt.push(e),Xe=tt.reduceRight(function(e,t){return function(r,n){try{var i=t(r,n,e);return h.isFuture(i)?i:h.value(i)}catch(a){return h.error(a)}}},_)}function je(e){rt.push(e),Ke=rt.reduceRight(function(e,t){return function(r,n){try{var i=t(r,n,e);return h.isFuture(i)?i:h.value(i)}catch(a){return h.error(a)}}},B)}function Ae(e){return Se(e),nt}var Ce,ke=[],Re=-1,Ue=!1,Ie=!1,Me=3e4,Fe=10,Ne=!1,Pe=!1,xe=!1,We=[],Le=!1,De=r,He=[],ze=!1,qe=[],Qe=new h,Ge=Object.create(null),Je=null,Ye=!0,$e=x,Ve=z,Xe=_,Ke=B,Ze=[],et=[],tt=[],rt=[],nt=this;Be.sync=!0,Be.idempotent=!0,Be.failswitch=!0;var it=Object.create(null,{begin:{value:q},end:{value:Q},use:{value:function(e){return Ee(e),it}}}),at=Object.create(null,{use:{value:function(e){return Oe(e),at}}}),st=Object.create(null,{use:{value:function(e){return je(e),st}}});Object.defineProperties(this,{"#":{value:Be},onError:{get:G,set:J},onerror:{get:G,set:J},uri:{get:Y},id:{get:_e},failswitch:{get:$,set:V},timeout:{get:X,set:K},retry:{get:Z,set:ee},idempotent:{get:te,set:re},keepAlive:{get:ie,set:ne},byref:{get:ae,set:se},simple:{get:ue,set:oe},useHarmonyMap:{get:ce,set:fe},filter:{get:le,set:he},addFilter:{value:ge},removeFilter:{value:ve},useService:{value:ye},invoke:{value:pe},ready:{value:de},subscribe:{value:me},unsubscribe:{value:be},use:{value:Ae},batch:{value:it},beforeFilter:{value:at},afterFilter:{value:st}}),a&&typeof a===m&&["failswitch","timeout","retry","idempotent","keepAlive","byref","simple","useHarmonyMap","filter"].forEach(function(e){e in a&&(nt[e]=a[e])}),typeof n===p?(ke=[n],Re=0,ye(n,i)):Array.isArray(n)&&(ke=n,Re=Math.floor(Math.random()*ke.length),ye(ke[Re],i))}function i(e){var t=document.createElement("a");if(t.href=e,"http:"!==t.protocol&&"https:"!==t.protocol&&"ws:"!==t.protocol&&"wss:"!==t.protocol)throw new Error("The "+t.protocol+" client isn't implemented.")}function a(t,r,n){try{return e.hprose.HttpClient.create(t,r,n)}catch(a){}try{return e.hprose.WebSocketClient.create(t,r,n)}catch(a){}if("string"==typeof t)i(t);else if(Array.isArray(t))throw t.forEach(function(e){i(e)}),new Error("Not support multiple protocol.");throw new Error("You should set server uri first!")}var s=e.setImmediate,u=e.hprose.Tags,o=e.hprose.ResultMode,c=e.hprose.BytesIO,f=e.hprose.Writer,l=e.hprose.Reader,h=e.hprose.Future,g=Function.prototype.call.bind(Array.prototype.slice),v=new Uint8Array(1);v[0]=u.TagEnd;var y="boolean",p="string",d="number",w="function",m="object";Object.defineProperty(n,"create",{value:a}),e.hprose.Client=n}(function(){return this||(1,eval)("this")}()),function(e,t){"use strict";function r(){}function n(i,a,o){function c(n,i){var a=new XMLHttpRequest;a.open("POST",m.uri,!0),e.location!==t&&"file:"!==e.location.protocol&&(a.withCredentials="true"),a.responseType="arraybuffer";for(var s in p)a.setRequestHeader(s,p[s]);return a.onload=function(){a.onload=r,a.status&&(200===a.status?i.resolve(new Uint8Array(a.response)):i.reject(new Error(a.status+":"+a.statusText)))},a.onerror=function(){i.reject(new Error("error"))},a.upload!==t&&(a.upload.onprogress=d),a.onprogress=w,n.constructor===String||ArrayBuffer.isView?a.send(n):n.buffer.slice?a.send(n.buffer.slice(0,n.length)):a.send(n.buffer),a}function f(e,t){var n=new u,i=c(e,n);return t.timeout>0&&(n=n.timeout(t.timeout).catchError(function(e){throw i.onload=r,i.onerror=r,i.abort(),e},function(e){return e instanceof TimeoutError})),t.oneway&&n.resolve(),n}function l(e){"function"==typeof e&&(d=e)}function h(){return d}function g(e){"function"==typeof e&&(w=e)}function v(){return w}function y(e,t){"content-type"!==e.toLowerCase()&&"content-length"!==e.toLowerCase()&&(t?p[e]=t:delete p[e])}if(this.constructor!==n)return new n(i,a,o);s.call(this,i,a,o);var p=Object.create(null),d=r,w=r,m=this;Object.defineProperties(this,{onProgress:{get:h,set:l},onprogress:{get:h,set:l},onRequestProgress:{get:h,set:l},onResponseProgress:{get:v,set:g},setHeader:{value:y},sendAndReceive:{value:f}})}function i(e){var t=document.createElement("a");if(t.href=e,"http:"!==t.protocol&&"https:"!==t.protocol)throw new Error("This client desn't support "+t.protocol+" scheme.")}function a(e,t,r){if("string"==typeof e)i(e);else{if(!Array.isArray(e))return new Error("You should set server uri first!");e.forEach(function(e){i(e)})}return new n(e,t,r)}var s=e.hprose.Client,u=e.hprose.Future;Object.defineProperty(n,"create",{value:a}),e.hprose.HttpClient=n}(function(){return this||(1,eval)("this")}()),function(e,t){"use strict";function r(){}function n(e,i,a){function c(){return 2147483647>d?++d:d=0}function f(e,t){var r=new u;r.writeInt32BE(e),t.constructor===String?r.writeString(t):r.write(t);var n=r.bytes;ArrayBuffer.isView?_.send(n):n.buffer.slice?_.send(n.buffer.slice(0,n.length)):_.send(n.buffer)}function l(e){b.resolve(e)}function h(e){var r=new u(e.data),n=r.readInt32BE(),i=m[n];if(delete m[n],i!==t&&(--w,i.resolve(r.read(r.length-4))),100>w&&T.length>0){++w;var a=T.shift();b.then(function(){f(a[0],a[1])})}0===w&&(B.keepAlive||p())}function g(e){m.forEach(function(t,r){t.reject(new Error(e.code+":"+e.reason)),delete m[r]}),w=0,_=null}function v(){b=new o,_=new WebSocket(B.uri),_.binaryType="arraybuffer",_.onopen=l,_.onmessage=h,_.onerror=r,_.onclose=g}function y(e,t){(null===_||_.readyState===WebSocket.CLOSING||_.readyState===WebSocket.CLOSED)&&v();var r=c(),n=new o;return m[r]=n,B.timeout>0&&(n=n.timeout(B.timeout).catchError(function(e){throw delete m[r],--w,e},function(e){return e instanceof TimeoutError})),100>w?(++w,b.then(function(){f(r,e)})):T.push([r,e]),t.oneway&&n.resolve(),n}function p(){null!==_&&(_.onopen=r,_.onmessage=r,_.onclose=r,_.close())}if(this.constructor!==n)return new n(e,i,a);s.call(this,e,i,a);var d=0,w=0,m=[],T=[],b=null,_=null,B=this;Object.defineProperties(this,{sendAndReceive:{value:y},close:{value:p}})}function i(e){var t=document.createElement("a");if(t.href=e,"ws:"!==t.protocol&&"wss:"!==t.protocol)throw new Error("This client desn't support "+t.protocol+" scheme.")}function a(e,t,r){if("string"==typeof e)i(e);else{if(!Array.isArray(e))return new Error("You should set server uri first!");e.forEach(function(e){i(e)})}return new n(e,t,r)}var s=e.hprose.Client,u=e.hprose.BytesIO,o=e.hprose.Future;Object.defineProperty(n,"create",{value:a}),e.hprose.WebSocketClient=n}(function(){return this||(1,eval)("this")}()),function(e){"use strict";function t(e){this.version=e||"2.0"}var r=e.hprose.Tags,n=e.hprose.BytesIO,i=e.hprose.Writer,a=e.hprose.Reader,s=1;t.prototype.inputFilter=function(e,t){var a=n.toString(e);"{"===a.charAt(0)&&(a="["+a+"]");for(var s=JSON.parse(a),u=new n,o=new i(u,!0),c=0,f=s.length;f>c;++c){var l=s[c];l.error?(u.writeByte(r.TagError),o.writeString(l.error.message)):(u.writeByte(r.TagResult),o.serialize(l.result))}return u.writeByte(r.TagEnd),u.bytes},t.prototype.outputFilter=function(e,t){var i=[],u=new n(e),o=new a(u,!1,!1),c=u.readByte();do{var f={};c===r.TagCall&&(f.method=o.readString(),c=u.readByte(),c===r.TagList&&(f.params=o.readListWithoutTag(),c=u.readByte()),c===r.TagTrue&&(c=u.readByte())),"1.1"===this.version?f.version="1.1":"2.0"===this.version&&(f.jsonrpc="2.0"),f.id=s++,i.push(f)}while(c===r.TagCall);return i.length>1?JSON.stringify(i):JSON.stringify(i[0])},e.hprose.JSONRPCClientFilter=t}(function(){return this||(1,eval)("this")}()),function(e){"use strict";e.hprose.common={Completer:e.hprose.Completer,Future:e.hprose.Future,ResultMode:e.hprose.ResultMode},e.hprose.io={BytesIO:e.hprose.BytesIO,ClassManager:e.hprose.ClassManager,Tags:e.hprose.Tags,RawReader:e.hprose.RawReader,Reader:e.hprose.Reader,Writer:e.hprose.Writer,Formatter:e.hprose.Formatter},e.hprose.client={Client:e.hprose.Client,HttpClient:e.hprose.HttpClient,WebSocketClient:e.hprose.WebSocketClient},e.hprose.filter={JSONRPCClientFilter:e.hprose.JSONRPCClientFilter},"function"==typeof define&&(define.cmd?define("hprose",[],e.hprose):define.amd&&define("hprose",[],function(){return e.hprose})),"object"==typeof module&&"object"==typeof module.exports&&(module.exports=e.hprose)}(function(){return this||(1,eval)("this")}());